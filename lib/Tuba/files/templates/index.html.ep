% layout 'default',
% title => "Global Change Information System",
% description => "The Global Change Information System (GCIS) is a web-based resource for traceable, sound global change data, information, and products.";

<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>

<style>
<style type="text/css">
      body {
        padding-top: 20px;
        padding-bottom: 60px;
      }

      .jumbotron {
        text-align: center;
        min-height: 110px;
        margin: 0;
      	padding: 100px 0;
      	background: #ffffff url("/usgcrp-globe-trans.png") no-repeat center top;
      }
      .jumbotron h1 {
        font-size: 70px;
        line-height: 1;
      }
      .jumbotron .lead {
        font-size: 24px;
        line-height: 1.25;
      }
      .navbar .nav {
      	margin:  0 10px 0 15px;
      }
      .navbar img.logo {
      	float: left;
      }
      .span2 {
      width: 16%;
      }

</style>

<center>
<svg width="200" height="200" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" version="1.1">
</svg>
</center>

%= javascript begin
$(function() {
    var pts = [
       [ 124.846628329842,192.728879323751 ],
       [ 75.153371670158,192.728879323751 ],
       [ 32.1177490060914,167.882250993909 ],
       [ 7.27112067624945,124.846628329842 ],
       [ 7.27112067624944,75.153371670158 ],
       [ 32.1177490060914,32.1177490060915 ],
       [ 75.1533716701579,7.27112067624947 ],
       [ 124.846628329842,7.27112067624944 ],
       [ 167.882250993909,32.1177490060914 ],
       [ 192.728879323751,75.153371670158 ],
       [ 192.728879323751,124.846628329842 ],
       [ 167.882250993909,167.882250993909 ],
    ];
    var svg = d3.select('svg');
    var w = $(window).width() * 0.8;
    var h = $(window).height() * 0.8;
    svg.attr('height',h);
    svg.attr('width',w);
    var polygon = svg.selectAll('polygon').data([ pts ]).enter().append('polygon');
    polygon.attr('style','fill:none;stroke:#dedede;stroke-width:.5px');
    polygon.attr('points',function(d) {
        return d.map( function(d) {
            return d.join(",")
        }
       ).join(" ");
    });

    // better to do a data join
    for (var j = 3; j < 6; j++) {
        for (var i = 0; i < 12; i++) {
            svg.append('path')
                .attr('stroke','#dedede')
                .attr('stroke-width','0.2')
                .attr('d',function(d) {
                    return 'M ' + pts[i][0] + ' ' + pts[i][1] + 'L' + pts[(i+j)%12][0] + ' ' + pts[(i+j)%12][1];
                });
        }
    }

    var a = svg.selectAll('a')
    .data([
           { text : 'report', i : 0 },
           { text : 'figure', i : 1 },
           { text : 'book', i : 2 },
           { text : 'journal', i : 3 },
           { text : 'article', i : 4 },
           { text : 'organization', i : 5 },
           { text : 'person', i : 6 },
           { text : 'dataset', i : 7 },
           { text : 'platform', i : 8 },
           { text : 'instrument', i : 9 },
           { text : 'model', i : 10 },
           { text : 'scenario', i : 11 }
          ])
        .enter()
        .append('a');

    a.attr('xlink:href', function(d) { return '/' + d.text } );
    var text = a.append('text');

    text.attr( 'x', function (d) { return pts[d.i][0] } )
        .attr( 'y', function (d) { return pts[d.i][1] } )
        .attr('font-family','sans-serif')
        .attr('font-size','4px')
        .attr('fill','black')
        .attr('text-anchor','middle')
        .text(function(d) { return d.text } )


})
%= end

<div class="jumbotron" itemscope itemtype="http://schema.org/WebApplication">
<h1 itemprop="name">Global Change Information System</h1>
<h3>Providing structured global change information.</h3>
</div>

<p class="lead" itemscope itemtype="http://schema.org/WebApplication" itemprop="description">
The Global Change Information System (GCIS) is a web-based resource for traceable, sound global change data, information, and products.
Designed for use by scientists, decision makers, and the public, the GCIS provides coordinated links to a select group of information
products produced, maintained, and disseminated by government agencies and organizations. As well as guiding users to global change research
products selected by the 13 member agencies, the GCIS serves as a key access point to assessments, reports, and tools produced
by the <a href="http://www.globalchange.gov">U.S. Global Change Research Program</a>. The GCIS is managed, integrated, and curated by USGCRP.
</p>

<p class="lead centered">Featured report : <%= link_to 'show_report', { report_identifier => 'nca3' } => begin %>
The Third National Climate Assessment<%= end %>

<h4><center>Information products:</center></h4>
<div class="row-fluid">
    % my $i;

    % for my $type (qw/report figure book journal article organization person  dataset platform instrument model scenario/) {
    <div class='span2 centered'>
        % my $route = $type =~ /figure/ ? 'list_all_figures' : "list_$type";
        %= link_to $route => class => 'btn btn-default' => style => 'width:90%;' => begin
        <%= pl($type) %><br>
        %= format_number(get_counts($type))
        %= end
    </div>
        % if (!(++$i % 6)) {
        </div><div class='row-fluid'>
        % }
    % }
</div>

</div>

<div class="row-fluid">

<div class="span3">
    <h2 class="centered">About</h2>
    <p>How we use identifiers and semantic
    information to provide points of reference and traceability.
    </p>
</div>

<div class="span3">
    <h2 class="centered">Examples</h2>
    <p>
Examples and tutorials for using this system as a researcher, citizen scientist, application developer or information theorist.
</p>
</div>

<div class="span3">
    <h2 class="centered">Data model</h2>
    <p>
    A description of how the information is structured, including
    the overlaps between relational and semantic representations of
    the information.
    </p>
</div>

<div class="span3">
    <h2 class="centered">API Reference</h2>
    <p>Complete documentation for the API, including methods for browsing and finding resources.</p>
</div>

</div>
<div class='row-fluid' style='text-align:center;'>
<div class="span3">
%= link_to 'about' => class => 'btn btn-default btn-inverse btn-large white' => begin
About the GCIS
%= end
</div>
<div class="span3">
    <%= link_to 'examples' => class => "btn btn-default btn-inverse btn-large white" => begin %>GCIS examples<%= end %>
</div>
<div class="span3">
    <%= link_to 'resources' => class => "btn btn-default btn-inverse btn-large white" => begin %>GCIS data model<%= end %>
</div>
<div class="span3">
    <%= link_to 'api_reference' => class => "btn btn-default btn-large btn-inverse white" => begin %>GCIS API reference<%= end %>
</div>
</div>

<br><br>
<div class="navbar">
        <div class='thumbnails' style='text-align:center;'>
    <span style="padding:1px;margin:1px;">
    <a href="http://www.commerce.gov" target="_agency" title="U.S. Department of Commerce">
        <img src="/logo/DOC.png" style="width:41px;"></a>
    </span>
    <span style="padding:1px;margin:1px;">
    <a href="http://www.defense.gov" target="_agency" title="U.S. Department of Defense">
        <img src="/logo/DOD.png" style="width:41px;"></a>
    </span>
    <span style="padding:1px;margin:1px;">
    <a href="http://www.energy.gov" target="_agency" title="U.S. Department of Energy">
        <img src="/logo/DOE.png" style="width:41px;"></a>
    </span>
    <span style="padding:1px;margin:1px;">
    <a href="http://www.doi.gov" target="_agency" title="U.S. Department of the Interior">
        <img src="/logo/DOI.png" style="width:43px;"></a>
    </span>
    <span style="padding:1px;margin:1px;">
    <a href="http://www.state.gov" target="_agency" title="U.S. Department of State">
        <img src="/logo/DOS.png" style="width:41px;"></a>
    </span>
    <span style="padding:1px;margin:1px;">
    <a href="http://www.dot.gov" target="_agency" title="US Department of Transportation">
        <img src="/logo/DOT.png" style="width:41px;"></a>
    </span>
    <span style="padding:1px;margin:1px;">
    <a href="http://www.epa.gov" target="_agency" title="US Environmental Protection Agency">
        <img src="/logo/EPA.png" style="width:41px;"></a>
    </span>
    <span style="padding:1px;margin:1px;">
    <a href="http://www.hhs.gov" target="_agency" title="U.S. Department of Health & Human Services">
        <img src="/logo/HHS.png" style="width:41px;"></a>
    </span>
    <span style="padding:1px;margin:1px;">
    <a href="http://www.nasa.gov" target="_agency" title="NASA">
        <img src="/logo/NASA.png" style="width:46px;"></a>
    </span>
    <span style="padding:1px;margin:1px;">
    <a href="http://www.nsf.gov" target="_agency" title="National Science Foundation">
        <img src="/logo/NSF.png" style="width:47px;"></a>
    </span>
    <span style="padding:1px;margin:1px;">
    <a href="http://www.si.edu" target="_agency" title="Smithsonian">
        <img src="/logo/SI.png" style="width:41px;"></a>
    </span>
    <span style="padding:1px;margin:1px;">
    <a href="http://www.usaid.gov" target="_agency" title="U.S. Agency for International Development">
        <img src="/logo/USAID.png" style="width:41px;"></a>
    </span>
    <span style="padding:1px;margin:1px;">
    <a href="http://www.usda.gov" target="_agency" title="U.S. Department of Agriculture">
        <img src="/logo/USDA.png" style="width:41px;"></a>
    </span>
</div>
</div>


